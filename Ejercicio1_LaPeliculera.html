<html>
    <head>
        <meta charset="UTF-8">
        <title>Var let const</title>
    </head>
    <p id="entrada"></p>
    <body>
        
        <script>
            const PELICULAS = ['Spider Man', 'Superman', 'Dragon Ball Super', 'La era del hielo', '18videos'];
            const COMIDAS = ['Caramelos', 'Palomitas', 'Perrito'];
            const BEBIDAS = ['Refresco', 'Agua'];
            const PRECIO_ESTANDAR = 8.5; 

            //Se pide nombre al cliente, se insiste hasta que no sea null o sea un string
            let nombreCliente =prompt("¿Cual es tu nombre?");

            while(!isNaN(nombreCliente) || nombreCliente == null) {
                alert("El nombre debe ser una palabra o no estar vacia");
                nombreCliente = prompt("¿Cual es tu nombre?");
            }
            //Se pide edad al cliente, se insiste hasta que no sea null o sea un numero (para ello se usa el parseo a numero y isNaN, ya que al hacer el parseo de un string nos devuelve NaN)
            //Todos los datos pasados por prompt son STRING
            let edadCliente = parseInt(prompt("¿Cual es tu edad?"));

            while(isNaN(edadCliente) || edadCliente == null) {
                alert("La edad debe ser un numero o no estar vacia");
                edadCliente = parseInt(prompt("¿Cual es tu edad?"));

            }

            //Se crea una lista de peliculas donde se meten las peliculas del array con un indice + 1 para que el usuario escoga por numero en vez por titulo
            let listaPeliculas="\n";

            for(i =0;i<=PELICULAS.length-1;i++){
                listaPeliculas += (i+1) + " - " + PELICULAS[i] +"\n";
            }
            //Se pide pelicula, se insiste mientras sea null o si es menor que escoga la 18videos
            let peliculaEscogida = prompt("¿Que pelicula quieres ver? " + listaPeliculas);

            while(peliculaEscogida == null||(edadCliente <= 17 && peliculaEscogida == 5)){
                alert("Pelicula escogida no valida");
                peliculaEscogida = prompt("¿Que pelicula quieres ver? " + listaPeliculas);

            }
            //Funcion que devuelve el precio de la entrada con el descuento SEGUN EDAD
            function descuento(){
                let entradaDescuento = PRECIO_ESTANDAR;
                if(edadCliente <= 17){   
                    entradaDescuento = 0.5;
                }else if(edadCliente >= 26 && edadCliente <= 35) {      
                    entradaDescuento *= 0.1;
                }else{
                    entradaDescuento *= 0.2;
                }
                return entradaDescuento;
            }


            let regalos="";
            let precioEntrada = descuento();

            if(edadCliente <= 17){
                regalos = COMIDAS[0] + ", " + BEBIDAS[0];
            }else if (edadCliente >= 18 && edadCliente <= 25 ) {
                regalos = COMIDAS[1] + ", " + COMIDAS[2] + ", " + BEBIDAS[0];
            } else if(edadCliente >= 26 && edadCliente <= 35) {
                regalos = COMIDAS[2] + ", " + BEBIDAS[0];
            }else{
                regalos = BEBIDAS[1];
            }
            
            console.log ("Cliente: " + nombreCliente + 
                        "\n Edad del cliente: "+ edadCliente + 
                        "\n Pelicula escogida: "+ PELICULAS[peliculaEscogida-1]+
                        "\n Regalos: " + regalos + 
                        "\n Total a pagar: "+ precioEntrada)
            document.getElementById("entrada").innerHTML="Cliente: " + nombreCliente + 
                                                         "<br> Edad del cliente: "+ edadCliente + 
                                                         "<br> Pelicula escogida: "+ PELICULAS[peliculaEscogida-1]+
                                                         "<br> Regalos: " + regalos + 
                                                         "<br> Total a pagar: "+ precioEntrada;;

        </script>

        
    </body>
</html>